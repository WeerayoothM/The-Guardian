(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(1),a=c.n(n),i=c(27),r=c.n(i),l=(c(34),c(4)),j=(c(35),c(2)),d=c(9),o=c(13),b=c.n(o);function u(){return Object(s.jsxs)("div",{className:"header",children:[Object(s.jsxs)("p",{className:"header-category",children:[Object(s.jsx)(d.b,{to:"/sections/business",children:"Business"})," |"," ",Object(s.jsx)(d.b,{to:"/sections/weather",children:"Weather"})," |"," ",Object(s.jsx)(d.b,{to:"/sections/sport",children:"Sport"})," |"," ",Object(s.jsx)(d.b,{to:"/sections/politics",children:"Politics"})]}),Object(s.jsx)(d.b,{to:"/",children:Object(s.jsx)("h1",{children:"The Guardian."})}),Object(s.jsx)("p",{className:"header-date",children:b()().format("dddd MMMM Do YYYY")})]})}var O=c(10),h=c.n(O);function f(e){var t=e.article;return Object(s.jsxs)("div",{className:"column",children:[Object(s.jsx)(d.b,{to:"/details?id=".concat(t.id),children:Object(s.jsx)("img",{src:t.fields.thumbnail})}),Object(s.jsx)("h3",{className:"headline",children:t.webTitle}),Object(s.jsx)("p",{className:"subheadline",children:t.fields.trailText}),Object(s.jsxs)("div",{className:"column-footer",children:[Object(s.jsxs)("span",{children:[parseInt(t.fields.wordcount/130)," minutes read"]}),Object(s.jsx)("span",{children:t.fields.firstPublicationDate&&b()(t.fields.firstPublicationDate).format("dddd MMMM Do YYYY")})]})]})}function x(e){var t=e.page,c=e.setPage,a=e.term,i=e.setTerm,r=e.orderBy,j=e.setOrderBy,d=Object(n.useState)([]),o=Object(l.a)(d,2),b=o[0],u=o[1],O=Object(n.useState)(null),x=Object(l.a)(O,2),m=x[0],p=x[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),N=g[0],S=g[1];Object(n.useEffect)((function(){T()}),[t,r]),Object(n.useEffect)((function(){var e=setTimeout((function(){return T()}),500);return function(){return clearTimeout(e)}}),[a]);var T=function(){console.log("fetching data");var e=a?"&q=".concat(a):"",c="&orderBy=".concat(r);S(!0),h.a.get("/api/articles?page=".concat(t).concat(e).concat(c)).then((function(e){u(e.data.articles),p(e.data.pages),S(!1)}))};return Object(s.jsxs)("div",{className:"body",children:[Object(s.jsxs)("div",{className:"subhead",children:[Object(s.jsxs)("div",{className:"subhead-prev-group",children:[Object(s.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),c(1)},children:"First page"}),"  |  ",Object(s.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),1!==t&&c(t-1)},children:"Previous page"})]}),Object(s.jsxs)("div",{className:"search-form",children:[Object(s.jsx)("label",{htmlFor:"search",children:"Search "}),Object(s.jsx)("input",{id:"search",type:"text",value:a,onChange:function(e){c(1),i(e.target.value)}})," ",Object(s.jsx)("span",{onClick:function(){return j("newest")},className:"newest"===r?"active":"",children:"Newest"})," ","|"," ",Object(s.jsx)("span",{onClick:function(){return j("oldest")},className:"oldest"===r?"active":"",children:"Oldest"})]}),Object(s.jsxs)("div",{className:"subhead-next-group",children:[Object(s.jsx)("a",{href:"",onClick:function(e){console.log("nextpage"),e.preventDefault(),t!==m&&c(t+1)},children:"Next page"}),"  |  ",Object(s.jsxs)("span",{children:["On Page ",t]})]})]}),Object(s.jsx)("div",{className:"content",children:N?Object(s.jsx)("div",{className:"loader",children:Object(s.jsx)("img",{src:"./loader.gif"})}):b.map((function(e){return Object(s.jsx)(f,{article:e},e.id)}))})]})}function m(e){var t=Object(n.useState)(null),c=Object(l.a)(t,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){var t=e.location.search.split("=")[1];h.a.get("/api/details?url=".concat(t)).then((function(e){i(e.data)}))}),[]),a?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"details-header",children:[Object(s.jsx)("p",{className:"left",children:a.sectionName}),Object(s.jsxs)("h1",{children:[" ",a.webTitle]}),Object(s.jsx)("p",{className:"right",children:a.fields.byline})]}),Object(s.jsx)("div",{className:"details-columns",dangerouslySetInnerHTML:{__html:a&&a.fields.main+a.fields.body}})]}):Object(s.jsx)("div",{className:"loader",children:Object(s.jsx)("img",{src:"./loader.gif"})})}function p(e){var t=e.match.params.section,c=Object(n.useState)(!1),a=Object(l.a)(c,2),i=a[0],r=a[1],j=Object(n.useState)("politics"),d=Object(l.a)(j,2),o=d[0],b=d[1],u=Object(n.useState)([]),O=Object(l.a)(u,2),x=O[0],m=O[1],p=Object(n.useState)([]),v=Object(l.a)(p,2),g=v[0],N=v[1],S=Object(n.useState)("Politics"),T=Object(l.a)(S,2),y=T[0],w=T[1];Object(n.useEffect)((function(){b(t),w(t),M()}),[t]),Object(n.useEffect)((function(){P()}),[o]);var C=function(e){b(e.target.id),w(e.target.innerText)},M=function(){h.a.get("/api/sections").then((function(e){m(e.data)}))},P=function(){var e=o?"&section=".concat(o):"";r(!0),h.a.get("/api/articles?".concat(e)).then((function(e){N(e.data.articles),r(!1)}))};return Object(s.jsxs)("div",{className:"sections",children:[Object(s.jsxs)("div",{className:"sections-index",children:[Object(s.jsx)("span",{children:"SECTIONS"}),Object(s.jsx)("ul",{children:x&&x.map((function(e){return Object(s.jsx)("li",{id:e.id,onClick:C,children:e.webTitle},e.id)}))})]}),Object(s.jsxs)("div",{className:"sections-body",children:[Object(s.jsx)("h1",{children:y}),Object(s.jsx)("div",{className:"content",children:i?Object(s.jsx)("div",{className:"loader",children:Object(s.jsx)("img",{src:"/loader.gif"})}):g.map((function(e){return Object(s.jsx)(f,{article:e},e.id)}))})]})]})}var v=function(){var e=Object(n.useState)(1),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(""),r=Object(l.a)(i,2),d=r[0],o=r[1],b=Object(n.useState)("newest"),O=Object(l.a)(b,2),h=O[0],f=O[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(u,{}),Object(s.jsxs)(j.c,{children:[Object(s.jsx)(j.a,{path:"/",exact:!0,render:function(){return Object(s.jsx)(x,{page:c,setPage:a,term:d,setTerm:o,orderBy:h,setOrderBy:f})}}),Object(s.jsx)(j.a,{path:"/details",component:m}),Object(s.jsx)(j.a,{path:"/sections/:section",component:p})]})]})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,60)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),s(e),n(e),a(e),i(e)}))};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(d.a,{children:Object(s.jsx)(v,{})})}),document.getElementById("root")),g()}},[[59,1,2]]]);
//# sourceMappingURL=main.49a3d0bc.chunk.js.map